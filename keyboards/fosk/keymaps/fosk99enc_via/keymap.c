#include QMK_KEYBOARD_H

#define _HOME 0
#define _FN 1

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

  [_HOME] = LAYOUT(
    KC_ESC,             KC_F1,    KC_F2,    KC_F3,    KC_F4,    KC_F5,    KC_F6,    KC_F7,    KC_F8,    KC_F9,    KC_F10,   KC_F11,   KC_F12,             KC_PSCR,  XXXXXXX,  KC_MPLY,
    KC_GRV,   KC_1,     KC_2,     KC_3,     KC_4,     KC_5,     KC_NUM,   KC_PSLS,  KC_PAST,  KC_PMNS,  KC_6,     KC_7,     KC_8,     KC_9,     KC_0,     KC_MINS,  KC_EQL,   MO(_FN),
    KC_TAB,   KC_Q,     KC_W,     KC_E,     KC_R,     KC_T,     KC_P7,    KC_P8,    KC_P9,    KC_PPLS,  KC_Y,     KC_U,     KC_I,     KC_O,     KC_P,     KC_LBRC,  KC_RBRC,  KC_BSLS,  
    QK_LOCK,  KC_A,     KC_S,     KC_D,     KC_F,     KC_G,     KC_P4,    KC_P5,    KC_P6,              KC_H,     KC_J,     KC_K,     KC_L,     KC_SCLN,  KC_QUOT,  KC_BSPC,
    KC_LSFT,  KC_Z,     KC_X,     KC_C,     KC_V,     KC_B,     KC_P1,    KC_P2,    KC_P3,    KC_PENT,  KC_N,     KC_M,     KC_COMM,  KC_DOT,   KC_SLSH,  KC_RSFT,  KC_UP,    KC_ENT,
    KC_LCTL,  KC_LGUI,            KC_LALT,  KC_SPC,             KC_P0,    KC_P0,    KC_PDOT,            KC_SPC,             KC_APP,   KC_RGUI,  KC_RCTL,  KC_LEFT,  KC_DOWN,  KC_RGHT
  ),

  [_FN] = LAYOUT(
    _______,            KC_F13,   KC_F14,   KC_F15,   KC_F16,   KC_F17,   KC_F18,   KC_F19,   KC_F20,   KC_F21,   KC_F22,   KC_F23,   KC_F24,             _______,  _______,  _______,
    _______,  RGB_M_P,  RGB_M_R,  RGB_M_SW, _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  MO(_FN),
    _______,  RGB_SAI,  RGB_VAI,  RGB_TOG,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  
    KC_CAPS,  RGB_HUI,  RGB_VAD,  RGB_MOD,  _______,  _______,  _______,  _______,  _______,            _______,  _______,  _______,  _______,  _______,  _______,  KC_DEL,
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  KC_PGUP,  _______,
    _______,  _______,            _______,  _______,            _______,  _______,  _______,            _______,            _______,  _______,  _______,  KC_HOME,  KC_PGDN,  KC_END
  ),

  [2] = LAYOUT(
    _______,            _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,            _______,  _______,  _______,
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______, 
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,            _______,  _______,  _______,  _______,  _______,  _______,  _______,
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,
    _______,  _______,            _______,  _______,            _______,  _______,  _______,            _______,            _______,  _______,  _______,  _______,  _______,  _______
  ),

  [3] = LAYOUT(
    _______,            _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,            _______,  _______,  _______,
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______, 
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,            _______,  _______,  _______,  _______,  _______,  _______,  _______,
    _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,  _______,
    _______,  _______,            _______,  _______,            _______,  _______,  _______,            _______,            _______,  _______,  _______,  _______,  _______,  _______
  )

};

#ifdef RGB_MATRIX_ENABLE
led_config_t g_led_config = {
  { // Key Matrix to LED Index
      // Keyboard - Right side
    {NO_LED, 1, 0, NO_LED, 98, 97, 96, 95, 94},
    {2, 3, 4, 5, 6, 7, 8, 9, 10},
    {19, 18, 17, 16, 15, 14, 13, 12, 11},
    {NO_LED, 20, 21, 22, 23, 24, 25, 26, NO_LED},
    {35, 34, 33, 32, 31, 30, 29, 28, 27},
    {36, 37, 38, 39, 40, 41, 42, NO_LED, NO_LED},
      // Keyboard - Left side
    {86, NO_LED, 87, 88, 89, 90, 91, 92, 93},
    {85, 84, 83, 82, 81, 80, 79, 78, 77},
    {68, 69, 70, 71, 72, 73, 74, 75, 76},
    {67, 66, 65, 64, 63, 62, 61, 60, 59},
    {50, 51, 52, 53, 54, 55, 56, 57, 58},
    {49, 48, NO_LED, 47, 46, NO_LED, 45, 44, 43}
  },
  { // LED Index to Physical Position
      // Keyboard - Right side
    {198.4, 0.0},   {211.2, 0.0},   //{224.0, 0.0},
    {224.0, 15.2},  {211.2, 15.2},  {198.4, 15.2},  {185.6, 15.2},  {172.8, 15.2},  {160.0, 15.2},  {147.2, 15.2},  {134.4, 15.2},  {118.4, 15.2},
    {118.4, 33.5},  {134.4, 27.4},  {147.2, 27.4},  {160.0, 27.4},  {172.8, 27.4},  {185.6, 27.4},  {198.4, 27.4},  {211.2, 27.4},  {224.0, 27.4},
    {217.6, 39.6},  {198.4, 39.6},  {185.6, 39.6},  {172.8, 39.6},  {160.0, 39.6},  {147.2, 39.6},  {134.4, 39.6},
    {118.4, 57.9},  {134.4, 51.8},  {147.2, 51.8},  {160.0, 51.8},  {172.8, 51.8},  {185.6, 51.8},  {198.4, 51.8},  {211.2, 51.8},  {224.0, 51.8},
    {230.4, 64.0},  {217.6, 64.0},  {204.8, 64.0},  {192.0, 64.0},  {179.2, 64.0},  {166.4, 64.0},  {140.8, 64.0},
      // Keyboard - Left side
    {105.6, 64.0},  {92.8, 64.0},   {80.0, 64.0},   {57.6, 64.0},   {35.2, 64.0},   {19.2, 64.0},   {3.2, 64.0},
    {0.0, 51.8},    {12.8, 51.8},   {25.6, 51.8},   {38.4, 51.8},   {51.2, 51.8},   {64.0, 51.8},   {80.0, 51.8},   {92.8, 51.8},   {105.6, 51.8},
    {105.6, 39.6},  {92.8, 39.6},   {80.0, 39.6},   {64.0, 39.6},   {51.2, 39.6},   {38.4, 39.6},   {25.6, 39.6},   {12.8, 39.6},   {0.0, 39.6},
    {0.0, 27.4},    {12.8, 27.4},   {25.6, 27.4},   {38.4, 27.4},   {51.2, 27.4},   {64.0, 27.4},   {80.0, 27.4},   {92.8, 27.4},   {105.6, 27.4},
    {105.6, 15.2},  {92.8, 15.2},   {80.0, 15.2},   {64.0, 15.2},   {51.2, 15.2},   {38.4, 15.2},   {25.6, 15.2},   {12.8, 15.2},   {0.0, 15.2},
    {0.0, 0.0},     {25.6, 0.0},    {38.4, 0.0},    {51.2, 0.0},    {64.0, 0.0},    {80.0, 0.0},    {92.8, 0.0},    {105.6, 0.0},
    {118.4, 0.0},   {134.4, 0.0},   {147.2, 0.0},   {160.0, 0.0},   {172.8, 0.0}
  },
  { // LED Index to Flag
    4, 4, //4,
    4, 1, 1, 1, 1, 1, 1, 1, 4,
    4, 1, 1, 1, 1, 1, 1, 1, 1,
    4, 1, 1, 1, 1, 1, 1,
    4, 1, 1, 1, 1, 1, 4, 4, 4,
    4, 4, 4, 4, 4, 4, 4,

    1, 1, 1, 4, 4, 4, 4,
    4, 1, 1, 1, 1, 1, 1, 1, 1,
    1, 1, 1, 1, 1, 1, 1, 1, 4,
    4, 1, 1, 1, 1, 1, 1, 1, 1,
    4, 4, 4, 1, 1, 1, 1, 1, 4,
    4, 4, 4, 4, 4, 4, 4, 4,
    4, 4, 4, 4, 4
  }
};
#endif

#if defined(ENCODER_MAP_ENABLE)
const uint16_t PROGMEM encoder_map[][NUM_ENCODERS][2] = {
    [_HOME] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU)  },
    [_FN] =   { ENCODER_CCW_CW(RGB_HUD, RGB_HUI)  },
    [2] =     { ENCODER_CCW_CW(RGB_VAD, RGB_VAI)  },
    [3] =     { ENCODER_CCW_CW(KC_RIGHT, KC_LEFT) },
};
#endif

// // define the array of layers. Later layers take precedence
// const rgblight_segment_t* const PROGMEM rgb_layers[] = RGBLIGHT_LAYERS_LIST(
//     caps_layer,
//     game_layer
// );

// // turn led 69 (under Caps Key) red
// const rgblight_segment_t PROGMEM caps_layer[] = RGBLIGHT_LAYER_SEGMENTS(
//   {69, 1, HSV_RED}
// );

// // wasd
// const rgblight_segment_t PROGMEM game_layer[] = RGBLIGHT_LAYER_SEGMENTS(
//   {66, 3, HSV_PURPLE},
//   {72, 1, HSV_PURPLE}
// );

// void keyboard_post_init_user(void) {
//     // Enable the LED layers
//     rgblight_layers = rgb_layers;
// }